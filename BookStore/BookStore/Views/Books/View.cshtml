@*@model IEnumerable<BookStore.Models.Book>*@

@using BookStore.Models;
@using PagedList.Mvc;
@using PagedList;
@model PagedList.IPagedList<Book>



@{
    ViewBag.Title = "Book Store";
}

@*@Html.ActionLink("Get my info", "YourInfo", "Books")
<br/>*@

@*@Html.DropDownList("catname", ViewBag.catname as SelectList, "All Categories", new { onchange = "l" })*@
<br />

@using (Html.BeginForm("View", "Books", FormMethod.Post))
{

    @Html.DropDownList("catname", ViewBag.catname as SelectList, new { onchange = "this.form.submit();"  })

}



<br />
<table class="table">
    <tr>


        <th class="col-md-2">
            @*@Html.DisplayNameFor(model => model.ImagePath)*@
            Books
        </th>
        <th class="col-md-1">
            @*@Html.DisplayNameFor(model => model.Category.NameCategory)*@
            Category
        </th>
        <th class="col-md-2">
            @*@Html.DisplayNameFor(model => model.Title)*@
            Title
        </th>
        <th class="col-md-2">
            @*@Html.DisplayNameFor(model => model.Author)*@
            Author
        </th>
        <th class="col-md-3">
            @*@Html.DisplayNameFor(model => model.Description)*@
            Description
        </th>
        <th class="col-md-1">
            @*@Html.DisplayNameFor(model => model.Price) &#8372;*@
            Price &#8372;
        </th>
        <th></th>


    </tr>

    @foreach (var item in Model)
    {

        //using (Html.BeginForm("AddToCart", "Profiles"))

            <tr>
                <td class="col-md-2">
                    <input type="number" name="BookId" value="@Html.DisplayFor(modelItem => item.BookId)" hidden />
                    @*@Html.DisplayFor(modelItem => item.ImagePath)*@
                    <img src="@Url.Content(item.ImagePath) " width="150" height="100" />
                </td>
                <td class="col-md-1">
                    @Html.DisplayFor(modelItem => item.Category.NameCategory)
                </td>
                <td class="col-md-2">
                    @Html.DisplayFor(modelItem => item.Title)
                </td>
                <td class="col-md-2">
                    @Html.DisplayFor(modelItem => item.Author)
                </td>
                <td class="col-md-3">
                    @Html.DisplayFor(modelItem => item.Desription)
                </td>
                <td class="col-md-1">
                    @Html.DisplayFor(modelItem => item.Price) &#8372;
                </td>

                <td>


                    @Html.ActionLink("Add to Cart", "OrderNow", "ShoppingCart", new { id = item.BookId}, new { @class = "btn btn-success" })
                    @*@Html.ActionLink("Index", "Carts", new { id = item.BookId })*@
                    @*<input type="submit" value="Buy" class="btn btn-success" />*@



                </td>
            </tr>

        
    } 



</table>


@*@using (Html.BeginForm("View", "Books", FormMethod.Post))
    {
        foreach (var item in Model)
        {
            <button type="button" name="catname" class="btn btn-success">
                @Html.DisplayFor(modelItem => item.Category.NameCategory)
            </button>
        }
    }*@


<script type="text/css">

    .pagination > li > a {
    display: none;
    }

    .pagination > li:last-child > a {
    display: block;
    }

</script>

<div class="bfot">
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

    @Html.PagedListPager(Model, page => Url.Action("View", new { page }))

</div>




@*<a href="/Books/Index">
       <button type="button" class="btn btn-success btn-lg">End test</button>
    </a>*@
